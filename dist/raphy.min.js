!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("svg.js"),require("eventemitter2")):"function"==typeof define&&define.amd?define(["svg.js","eventemitter2"],e):"object"==typeof exports?exports.raphy=e(require("svg.js"),require("eventemitter2")):t.raphy=e(t.SVG,t.EventEmitter2)}(window,(function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=217)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(56),i=n(57),o=n(101),a=n(136),s=i((function(t){return t.push(void 0,o),r(a,void 0,t)}));t.exports=s},function(t,e,n){var r=n(61),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){var r=n(94),i=n(99);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e,n){var r=n(9),i=n(95),o=n(96),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},function(t,e,n){var r=n(5).Symbol;t.exports=r},function(t,e,n){var r=n(18),i=n(43);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e,n){var r=n(74),i=n(146),o=n(10);t.exports=function(t){return o(t)?r(t):i(t)}},function(t,e,n){var r=n(19),i=n(34);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(91);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(47),i=n(25);t.exports=function(t,e,n,o){var a=!n;n||(n={});for(var s=-1,c=e.length;++s<c;){var u=e[s],f=o?o(n[u],t[u],u,n,t):void 0;void 0===f&&(f=t[u]),a?i(n,u,f):r(n,u,f)}return n}},function(t,e,n){var r=n(33);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e,n){var r=n(8),i=n(2);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e,n){var r=n(21),i=n(107),o=n(108),a=n(109),s=n(110),c=n(111);function u(t){var e=this.__data__=new r(t);this.size=e.size}u.prototype.clear=i,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=s,u.prototype.set=c,t.exports=u},function(t,e,n){var r=n(102),i=n(103),o=n(104),a=n(105),s=n(106);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,t.exports=c},function(t,e,n){var r=n(15);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(7)(Object,"create");t.exports=r},function(t,e,n){var r=n(120);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(60);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var r=n(127),i=n(6),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=c},function(t,e,n){(function(t){var r=n(5),i=n(129),o=e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.Buffer:void 0,c=(s?s.isBuffer:void 0)||i;t.exports=c}).call(this,n(26)(t))},function(t,e,n){var r=n(74),i=n(134),o=n(10);t.exports=function(t){return o(t)?r(t,!0):i(t)}},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(162),i=n(38),o=n(163),a=n(164),s=n(165),c=n(8),u=n(63),f=u(r),l=u(i),h=u(o),p=u(a),d=u(s),v=c;(r&&"[object DataView]"!=v(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=v(new i)||o&&"[object Promise]"!=v(o.resolve())||a&&"[object Set]"!=v(new a)||s&&"[object WeakMap]"!=v(new s))&&(v=function(t){var e=c(t),n="[object Object]"==e?t.constructor:void 0,r=n?u(n):"";if(r)switch(r){case f:return"[object DataView]";case l:return"[object Map]";case h:return"[object Promise]";case p:return"[object Set]";case d:return"[object WeakMap]"}return e}),t.exports=v},function(t,e,n){var r=n(3),i=n(52),o=n(169),a=n(172);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(a(t))}},function(t,e,n){var r=n(8),i=n(6);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){var r=n(197),i=n(198),o=n(199);t.exports=function(t){return r(t)||i(t)||o()}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var r=n(7)(n(5),"Map");t.exports=r},function(t,e,n){var r=n(112),i=n(119),o=n(121),a=n(122),s=n(123);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,t.exports=c},function(t,e,n){var r=n(69);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e,n){var r=n(72)(Object.getPrototypeOf,Object);t.exports=r},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e,n){var r=n(131),i=n(45),o=n(46),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){(function(t){var r=n(61),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process,s=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s}).call(this,n(26)(t))},function(t,e,n){var r=n(25),i=n(15),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];o.call(t,e)&&i(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(149),i=n(167),o=n(37),a=n(3),s=n(177);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?a(t)?i(t[0],t[1]):r(t):s(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},function(t,e,n){var r=n(161),i=n(79),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),r(a(t),(function(e){return o.call(t,e)})))}:i;t.exports=s},function(t,e,n){var r=n(32),i=n(17);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},function(t,e,n){var r=n(3),i=n(33),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(a.test(t)||!o.test(t)||null!=e&&t in Object(e))}},function(t,e,n){var r=n(187);t.exports=function(t){return(null==t?0:t.length)?r(t,1):[]}},function(t,e,n){var r=n(192),i=n(48),o=n(193),a=Math.max;t.exports=function(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var c=null==n?0:o(n);return c<0&&(c=a(s+c,0)),r(t,i(e,3),c)}},function(e,n){e.exports=t},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(37),i=n(58),o=n(59);t.exports=function(t,e){return o(i(t,e,r),t+"")}},function(t,e,n){var r=n(56),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,a=-1,s=i(o.length-e,0),c=Array(s);++a<s;)c[a]=o[e+a];a=-1;for(var u=Array(e+1);++a<e;)u[a]=o[a];return u[e]=n(c),r(t,this,u)}}},function(t,e,n){var r=n(92),i=n(100)(r);t.exports=i},function(t,e,n){var r=n(7),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(62))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var r=n(20),i=n(65),o=n(66),a=n(125),s=n(2),c=n(29),u=n(73);t.exports=function t(e,n,f,l,h){e!==n&&o(n,(function(o,c){if(h||(h=new r),s(o))a(e,n,c,f,t,l,h);else{var p=l?l(u(e,c),o,c+"",e,n,h):void 0;void 0===p&&(p=o),i(e,c,p)}}),c)}},function(t,e,n){var r=n(25),i=n(15);t.exports=function(t,e,n){(void 0===n||i(t[e],n))&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(124)();t.exports=r},function(t,e,n){(function(t){var r=n(5),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(26)(t))},function(t,e,n){var r=n(40);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(5).Uint8Array;t.exports=r},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e,n){var r=n(126),i=n(41),o=n(42);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e){t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},function(t,e,n){var r=n(133),i=n(27),o=n(3),a=n(28),s=n(30),c=n(44),u=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),f=!n&&i(t),l=!n&&!f&&a(t),h=!n&&!f&&!l&&c(t),p=n||f||l||h,d=p?r(t.length,String):[],v=d.length;for(var y in t)!e&&!u.call(t,y)||p&&("length"==y||l&&("offset"==y||"parent"==y)||h&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||s(y,v))||d.push(y);return d}},function(t,e,n){var r=n(151),i=n(6);t.exports=function t(e,n,o,a,s){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!=e&&n!=n:r(e,n,o,a,t,s))}},function(t,e,n){var r=n(152),i=n(155),o=n(156);t.exports=function(t,e,n,a,s,c){var u=1&n,f=t.length,l=e.length;if(f!=l&&!(u&&l>f))return!1;var h=c.get(t);if(h&&c.get(e))return h==e;var p=-1,d=!0,v=2&n?new r:void 0;for(c.set(t,e),c.set(e,t);++p<f;){var y=t[p],g=e[p];if(a)var b=u?a(g,y,p,e,t,c):a(y,g,p,t,e,c);if(void 0!==b){if(b)continue;d=!1;break}if(v){if(!i(e,(function(t,e){if(!o(v,e)&&(y===t||s(y,t,n,a,c)))return v.push(e)}))){d=!1;break}}else if(y!==g&&!s(y,g,n,a,c)){d=!1;break}}return c.delete(t),c.delete(e),d}},function(t,e,n){var r=n(78),i=n(50),o=n(11);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(49),i=n(3);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(2);t.exports=function(t){return t==t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},function(t,e,n){var r=n(175),i=n(176);t.exports=function(t,e){return null!=t&&i(t,e,r)}},function(t,e,n){var r=n(49),i=n(41),o=n(50),a=n(79),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:a;t.exports=s},function(t,n){t.exports=e},function(t,e,n){"use strict";var r=n(139),i=n(140);function o(t){return Array.isArray(t)?t.map(o):(e=t,"[object Object]"===Object.prototype.toString.call(e)?Object.keys(t).reduce((function(e,n){return e[n]=o(t[n]),e}),{}):t);var e}t.exports=function(t,e){if(e=Object.assign({parentProperty:"parent_id",childrenProperty:"children",customID:"id",rootID:"0"},e),!Array.isArray(t))throw new TypeError("Expected an array but got an invalid argument");var n=function(t,e){var n=i(t,e.customID);return t.reduce((function(t,i){var o=r.get(i,e.parentProperty);return o&&n.hasOwnProperty(o)||(o=e.rootID),o&&t.hasOwnProperty(o)?(t[o].push(i),t):(t[o]=[i],t)}),{})}(o(t),e);return function t(e,n,r,i){var o=[];for(var a in n){var s=n[a],c=e[s[r]];(s||n.hasOwnProperty(a))&&(c&&(s[i]=t(e,c,r,i)),o.push(s))}return o}(n,n[e.rootID],e.customID,e.childrenProperty)}},function(t,e,n){var r=n(25),i=n(141),o=Object.prototype.hasOwnProperty,a=i((function(t,e,n){o.call(t,n)?t[n].push(e):r(t,n,[e])}));t.exports=a},function(t,e,n){var r=n(183),i=n(186)((function(t,e){return null==t?{}:r(t,e)}));t.exports=i},function(t,e,n){var r=n(189),i=n(190),o=n(191);t.exports=function(t,e){return r(t)||i(t,e)||o()}},function(t,e,n){var r=n(196)(n(54));t.exports=r},function(t,e,n){var r=n(200);t.exports=function(t){return r(t,5)}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e,n){var r=n(93),i=n(60),o=n(37),a=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=a},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e,n){var r=n(18),i=n(97),o=n(2),a=n(63),s=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,f=c.toString,l=u.hasOwnProperty,h=RegExp("^"+f.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?h:s).test(a(t))}},function(t,e,n){var r=n(9),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r,i=n(98),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!o&&o in t}},function(t,e,n){var r=n(5)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e){var n=Date.now;t.exports=function(t){var e=0,r=0;return function(){var i=n(),o=16-(i-r);if(r=i,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var r=n(64),i=n(2);t.exports=function t(e,n,o,a,s,c){return i(e)&&i(n)&&(c.set(n,e),r(e,n,void 0,t,c),c.delete(n)),e}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(22),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(22);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(22);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(22);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(21);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(21),i=n(38),o=n(39);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(113),i=n(21),o=n(38);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(t,e,n){var r=n(114),i=n(115),o=n(116),a=n(117),s=n(118);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,t.exports=c},function(t,e,n){var r=n(23);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(23),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(23),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(23);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var r=n(24);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(24);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(24);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(24);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e){t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var c=a[t?s:++i];if(!1===n(o[c],c,o))break}return e}}},function(t,e,n){var r=n(65),i=n(67),o=n(68),a=n(70),s=n(71),c=n(27),u=n(3),f=n(128),l=n(28),h=n(18),p=n(2),d=n(130),v=n(44),y=n(73),g=n(132);t.exports=function(t,e,n,b,m,x,w){var k=y(t,n),j=y(e,n),_=w.get(j);if(_)r(t,n,_);else{var S=x?x(k,j,n+"",t,e,w):void 0,O=void 0===S;if(O){var E=u(j),C=!E&&l(j),P=!E&&!C&&v(j);S=j,E||C||P?u(k)?S=k:f(k)?S=a(k):C?(O=!1,S=i(j,!0)):P?(O=!1,S=o(j,!0)):S=[]:d(j)||c(j)?(S=k,c(k)?S=g(k):p(k)&&!h(k)||(S=s(j))):O=!1}O&&(w.set(j,S),m(S,j,b,x,w),w.delete(j)),r(t,n,S)}}},function(t,e,n){var r=n(2),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},function(t,e,n){var r=n(8),i=n(6);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},function(t,e,n){var r=n(10),i=n(6);t.exports=function(t){return i(t)&&r(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(8),i=n(41),o=n(6),a=Function.prototype,s=Object.prototype,c=a.toString,u=s.hasOwnProperty,f=c.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=u.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==f}},function(t,e,n){var r=n(8),i=n(43),o=n(6),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!a[r(t)]}},function(t,e,n){var r=n(16),i=n(29);t.exports=function(t){return r(t,i(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(2),i=n(42),o=n(135),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=i(t),n=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&n.push(s);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var r=n(64),i=n(137)((function(t,e,n,i){r(t,e,n,i)}));t.exports=i},function(t,e,n){var r=n(57),i=n(138);t.exports=function(t){return r((function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),e=Object(e);++r<o;){var c=n[r];c&&t(e,c,r,a)}return e}))}},function(t,e,n){var r=n(15),i=n(10),o=n(30),a=n(2);t.exports=function(t,e,n){if(!a(n))return!1;var s=typeof e;return!!("number"==s?i(n)&&o(e,n.length):"string"==s&&e in n)&&r(n[e],t)}},function(t,e,n){"use strict";t.exports={set:function(t,e,n){if(t&&"object"==typeof t){if("string"==typeof e&&""!==e){var r=e.split(".");return r.reduce((function(t,e,i){return t[e]=t[e]||{},r.length==i+1&&(t[e]=n),t[e]}),t)}return"number"==typeof e?(t[e]=n,t[e]):t}return t},get:function(t,e){return t&&"object"==typeof t?"string"==typeof e&&""!==e?e.split(".").reduce((function(t,e){return t&&t[e]}),t):"number"==typeof e?t[e]:t:t},has:function(t,e,n){return n=n||{},!(!t||"object"!=typeof t)&&("string"==typeof e&&""!==e?e.split(".").reduce((function(t,e,r,i){return r==i.length-1?n.own?!(!t||!t.hasOwnProperty(e)):!!(null!==t&&"object"==typeof t&&e in t):t&&t[e]}),t):"number"==typeof e&&e in t)},hasOwn:function(t,e,n){return this.has(t,e,n||{own:!0})},isIn:function(t,e,n,r){if(r=r||{},t&&"object"==typeof t){if("string"==typeof e&&""!==e){var i,o=e.split("."),a=!1;return i=!!o.reduce((function(t,e){return a=a||t===n||!!t&&t[e]===n,t&&t[e]}),t),r.validPath?a&&i:a}return!1}return!1}}},function(t,e,n){(function(t,n){var r="[object Arguments]",i="[object Map]",o="[object Object]",a="[object Set]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/,u=/^\./,f=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,h=/^\[object .+?Constructor\]$/,p=/^(?:0|[1-9]\d*)$/,d={};d["[object Float32Array]"]=d["[object Float64Array]"]=d["[object Int8Array]"]=d["[object Int16Array]"]=d["[object Int32Array]"]=d["[object Uint8Array]"]=d["[object Uint8ClampedArray]"]=d["[object Uint16Array]"]=d["[object Uint32Array]"]=!0,d[r]=d["[object Array]"]=d["[object ArrayBuffer]"]=d["[object Boolean]"]=d["[object DataView]"]=d["[object Date]"]=d["[object Error]"]=d["[object Function]"]=d[i]=d["[object Number]"]=d[o]=d["[object RegExp]"]=d[a]=d["[object String]"]=d["[object WeakMap]"]=!1;var v="object"==typeof t&&t&&t.Object===Object&&t,y="object"==typeof self&&self&&self.Object===Object&&self,g=v||y||Function("return this")(),b=e&&!e.nodeType&&e,m=b&&"object"==typeof n&&n&&!n.nodeType&&n,x=m&&m.exports===b&&v.process,w=function(){try{return x&&x.binding("util")}catch(t){}}(),k=w&&w.isTypedArray;function j(t,e,n,r){for(var i=-1,o=t?t.length:0;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function _(t,e){for(var n=-1,r=t?t.length:0;++n<r;)if(e(t[n],n,t))return!0;return!1}function S(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function O(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function E(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var C,P,G,V=Array.prototype,A=Function.prototype,M=Object.prototype,D=g["__core-js_shared__"],I=(C=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"",N=A.toString,T=M.hasOwnProperty,L=M.toString,B=RegExp("^"+N.call(T).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),z=g.Symbol,F=g.Uint8Array,R=M.propertyIsEnumerable,Y=V.splice,U=(P=Object.keys,G=Object,function(t){return P(G(t))}),X=Ot(g,"DataView"),W=Ot(g,"Map"),$=Ot(g,"Promise"),Z=Ot(g,"Set"),H=Ot(g,"WeakMap"),q=Ot(Object,"create"),K=Dt(X),J=Dt(W),Q=Dt($),tt=Dt(Z),et=Dt(H),nt=z?z.prototype:void 0,rt=nt?nt.valueOf:void 0,it=nt?nt.toString:void 0;function ot(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function at(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function st(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function ct(t){var e=-1,n=t?t.length:0;for(this.__data__=new st;++e<n;)this.add(t[e])}function ut(t){this.__data__=new at(t)}function ft(t,e){var n=Ft(t)||zt(t)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],r=n.length,i=!!r;for(var o in t)!e&&!T.call(t,o)||i&&("length"==o||Ct(o,r))||n.push(o);return n}function lt(t,e){for(var n=t.length;n--;)if(Bt(t[n][0],e))return n;return-1}function ht(t,e,n,r){return vt(t,(function(t,i,o){e(r,t,n(t),o)})),r}ot.prototype.clear=function(){this.__data__=q?q(null):{}},ot.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},ot.prototype.get=function(t){var e=this.__data__;if(q){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return T.call(e,t)?e[t]:void 0},ot.prototype.has=function(t){var e=this.__data__;return q?void 0!==e[t]:T.call(e,t)},ot.prototype.set=function(t,e){return this.__data__[t]=q&&void 0===e?"__lodash_hash_undefined__":e,this},at.prototype.clear=function(){this.__data__=[]},at.prototype.delete=function(t){var e=this.__data__,n=lt(e,t);return!(n<0)&&(n==e.length-1?e.pop():Y.call(e,n,1),!0)},at.prototype.get=function(t){var e=this.__data__,n=lt(e,t);return n<0?void 0:e[n][1]},at.prototype.has=function(t){return lt(this.__data__,t)>-1},at.prototype.set=function(t,e){var n=this.__data__,r=lt(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},st.prototype.clear=function(){this.__data__={hash:new ot,map:new(W||at),string:new ot}},st.prototype.delete=function(t){return St(this,t).delete(t)},st.prototype.get=function(t){return St(this,t).get(t)},st.prototype.has=function(t){return St(this,t).has(t)},st.prototype.set=function(t,e){return St(this,t).set(t,e),this},ct.prototype.add=ct.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},ct.prototype.has=function(t){return this.__data__.has(t)},ut.prototype.clear=function(){this.__data__=new at},ut.prototype.delete=function(t){return this.__data__.delete(t)},ut.prototype.get=function(t){return this.__data__.get(t)},ut.prototype.has=function(t){return this.__data__.has(t)},ut.prototype.set=function(t,e){var n=this.__data__;if(n instanceof at){var r=n.__data__;if(!W||r.length<199)return r.push([t,e]),this;n=this.__data__=new st(r)}return n.set(t,e),this};var pt,dt,vt=(pt=function(t,e){return t&&yt(t,e,Ht)},function(t,e){if(null==t)return t;if(!Rt(t))return pt(t,e);for(var n=t.length,r=dt?n:-1,i=Object(t);(dt?r--:++r<n)&&!1!==e(i[r],r,i););return t}),yt=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var c=a[t?s:++i];if(!1===n(o[c],c,o))break}return e}}();function gt(t,e){for(var n=0,r=(e=Pt(e,t)?[e]:jt(e)).length;null!=t&&n<r;)t=t[Mt(e[n++])];return n&&n==r?t:void 0}function bt(t,e){return null!=t&&e in Object(t)}function mt(t,e,n,s,c){return t===e||(null==t||null==e||!Xt(t)&&!Wt(e)?t!=t&&e!=e:function(t,e,n,s,c,u){var f=Ft(t),l=Ft(e),h="[object Array]",p="[object Array]";f||(h=(h=Et(t))==r?o:h);l||(p=(p=Et(e))==r?o:p);var d=h==o&&!S(t),v=p==o&&!S(e),y=h==p;if(y&&!d)return u||(u=new ut),f||Zt(t)?_t(t,e,n,s,c,u):function(t,e,n,r,o,s,c){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!r(new F(t),new F(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Bt(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case i:var u=O;case a:var f=2&s;if(u||(u=E),t.size!=e.size&&!f)return!1;var l=c.get(t);if(l)return l==e;s|=1,c.set(t,e);var h=_t(u(t),u(e),r,o,s,c);return c.delete(t),h;case"[object Symbol]":if(rt)return rt.call(t)==rt.call(e)}return!1}(t,e,h,n,s,c,u);if(!(2&c)){var g=d&&T.call(t,"__wrapped__"),b=v&&T.call(e,"__wrapped__");if(g||b){var m=g?t.value():t,x=b?e.value():e;return u||(u=new ut),n(m,x,s,c,u)}}if(!y)return!1;return u||(u=new ut),function(t,e,n,r,i,o){var a=2&i,s=Ht(t),c=s.length,u=Ht(e).length;if(c!=u&&!a)return!1;var f=c;for(;f--;){var l=s[f];if(!(a?l in e:T.call(e,l)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var p=!0;o.set(t,e),o.set(e,t);var d=a;for(;++f<c;){l=s[f];var v=t[l],y=e[l];if(r)var g=a?r(y,v,l,e,t,o):r(v,y,l,t,e,o);if(!(void 0===g?v===y||n(v,y,r,i,o):g)){p=!1;break}d||(d="constructor"==l)}if(p&&!d){var b=t.constructor,m=e.constructor;b!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof m&&m instanceof m)&&(p=!1)}return o.delete(t),o.delete(e),p}(t,e,n,s,c,u)}(t,e,mt,n,s,c))}function xt(t){return!(!Xt(t)||function(t){return!!I&&I in t}(t))&&(Yt(t)||S(t)?B:h).test(Dt(t))}function wt(t){return"function"==typeof t?t:null==t?qt:"object"==typeof t?Ft(t)?function(t,e){if(Pt(t)&&Gt(e))return Vt(Mt(t),e);return function(n){var r=function(t,e,n){var r=null==t?void 0:gt(t,e);return void 0===r?n:r}(n,t);return void 0===r&&r===e?function(t,e){return null!=t&&function(t,e,n){e=Pt(e,t)?[e]:jt(e);var r,i=-1,o=e.length;for(;++i<o;){var a=Mt(e[i]);if(!(r=null!=t&&n(t,a)))break;t=t[a]}if(r)return r;return!!(o=t?t.length:0)&&Ut(o)&&Ct(a,o)&&(Ft(t)||zt(t))}(t,e,bt)}(n,t):mt(e,r,void 0,3)}}(t[0],t[1]):function(t){var e=function(t){var e=Ht(t),n=e.length;for(;n--;){var r=e[n],i=t[r];e[n]=[r,i,Gt(i)]}return e}(t);if(1==e.length&&e[0][2])return Vt(e[0][0],e[0][1]);return function(n){return n===t||function(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var c=(s=n[i])[0],u=t[c],f=s[1];if(a&&s[2]){if(void 0===u&&!(c in t))return!1}else{var l=new ut;if(r)var h=r(u,f,c,t,e,l);if(!(void 0===h?mt(f,u,r,3,l):h))return!1}}return!0}(n,t,e)}}(t):Pt(e=t)?(n=Mt(e),function(t){return null==t?void 0:t[n]}):function(t){return function(e){return gt(e,t)}}(e);var e,n}function kt(t){if(n=(e=t)&&e.constructor,r="function"==typeof n&&n.prototype||M,e!==r)return U(t);var e,n,r,i=[];for(var o in Object(t))T.call(t,o)&&"constructor"!=o&&i.push(o);return i}function jt(t){return Ft(t)?t:At(t)}function _t(t,e,n,r,i,o){var a=2&i,s=t.length,c=e.length;if(s!=c&&!(a&&c>s))return!1;var u=o.get(t);if(u&&o.get(e))return u==e;var f=-1,l=!0,h=1&i?new ct:void 0;for(o.set(t,e),o.set(e,t);++f<s;){var p=t[f],d=e[f];if(r)var v=a?r(d,p,f,e,t,o):r(p,d,f,t,e,o);if(void 0!==v){if(v)continue;l=!1;break}if(h){if(!_(e,(function(t,e){if(!h.has(e)&&(p===t||n(p,t,r,i,o)))return h.add(e)}))){l=!1;break}}else if(p!==d&&!n(p,d,r,i,o)){l=!1;break}}return o.delete(t),o.delete(e),l}function St(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Ot(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return xt(n)?n:void 0}var Et=function(t){return L.call(t)};function Ct(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||p.test(t))&&t>-1&&t%1==0&&t<e}function Pt(t,e){if(Ft(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!$t(t))||(c.test(t)||!s.test(t)||null!=e&&t in Object(e))}function Gt(t){return t==t&&!Xt(t)}function Vt(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}(X&&"[object DataView]"!=Et(new X(new ArrayBuffer(1)))||W&&Et(new W)!=i||$&&"[object Promise]"!=Et($.resolve())||Z&&Et(new Z)!=a||H&&"[object WeakMap]"!=Et(new H))&&(Et=function(t){var e=L.call(t),n=e==o?t.constructor:void 0,r=n?Dt(n):void 0;if(r)switch(r){case K:return"[object DataView]";case J:return i;case Q:return"[object Promise]";case tt:return a;case et:return"[object WeakMap]"}return e});var At=Lt((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if($t(t))return it?it.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(e);var n=[];return u.test(t)&&n.push(""),t.replace(f,(function(t,e,r,i){n.push(r?i.replace(l,"$1"):e||t)})),n}));function Mt(t){if("string"==typeof t||$t(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Dt(t){if(null!=t){try{return N.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var It,Nt,Tt=(It=function(t,e,n){t[n]=e},function(t,e){var n=Ft(t)?j:ht,r=Nt?Nt():{};return n(t,It,wt(e),r)});function Lt(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(Lt.Cache||st),n}function Bt(t,e){return t===e||t!=t&&e!=e}function zt(t){return function(t){return Wt(t)&&Rt(t)}(t)&&T.call(t,"callee")&&(!R.call(t,"callee")||L.call(t)==r)}Lt.Cache=st;var Ft=Array.isArray;function Rt(t){return null!=t&&Ut(t.length)&&!Yt(t)}function Yt(t){var e=Xt(t)?L.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}function Ut(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Xt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Wt(t){return!!t&&"object"==typeof t}function $t(t){return"symbol"==typeof t||Wt(t)&&"[object Symbol]"==L.call(t)}var Zt=k?function(t){return function(e){return t(e)}}(k):function(t){return Wt(t)&&Ut(t.length)&&!!d[L.call(t)]};function Ht(t){return Rt(t)?ft(t):kt(t)}function qt(t){return t}n.exports=Tt}).call(this,n(62),n(26)(t))},function(t,e,n){var r=n(142),i=n(143),o=n(48),a=n(3);t.exports=function(t,e){return function(n,s){var c=a(n)?r:i,u=e?e():{};return c(n,t,o(s,2),u)}}},function(t,e){t.exports=function(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}},function(t,e,n){var r=n(144);t.exports=function(t,e,n,i){return r(t,(function(t,r,o){e(i,t,n(t),o)})),i}},function(t,e,n){var r=n(145),i=n(148)(r);t.exports=i},function(t,e,n){var r=n(66),i=n(11);t.exports=function(t,e){return t&&r(t,e,i)}},function(t,e,n){var r=n(42),i=n(147),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var r=n(72)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(10);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var o=n.length,a=e?o:-1,s=Object(n);(e?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},function(t,e,n){var r=n(150),i=n(166),o=n(81);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(20),i=n(75);t.exports=function(t,e,n,o){var a=n.length,s=a,c=!o;if(null==t)return!s;for(t=Object(t);a--;){var u=n[a];if(c&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++a<s;){var f=(u=n[a])[0],l=t[f],h=u[1];if(c&&u[2]){if(void 0===l&&!(f in t))return!1}else{var p=new r;if(o)var d=o(l,h,f,t,e,p);if(!(void 0===d?i(h,l,3,o,p):d))return!1}}return!0}},function(t,e,n){var r=n(20),i=n(76),o=n(157),a=n(160),s=n(31),c=n(3),u=n(28),f=n(44),l="[object Object]",h=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,p,d,v){var y=c(t),g=c(e),b=y?"[object Array]":s(t),m=g?"[object Array]":s(e),x=(b="[object Arguments]"==b?l:b)==l,w=(m="[object Arguments]"==m?l:m)==l,k=b==m;if(k&&u(t)){if(!u(e))return!1;y=!0,x=!1}if(k&&!x)return v||(v=new r),y||f(t)?i(t,e,n,p,d,v):o(t,e,b,n,p,d,v);if(!(1&n)){var j=x&&h.call(t,"__wrapped__"),_=w&&h.call(e,"__wrapped__");if(j||_){var S=j?t.value():t,O=_?e.value():e;return v||(v=new r),d(S,O,n,p,v)}}return!!k&&(v||(v=new r),a(t,e,n,p,d,v))}},function(t,e,n){var r=n(39),i=n(153),o=n(154);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,t.exports=a},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(9),i=n(69),o=n(15),a=n(76),s=n(158),c=n(159),u=r?r.prototype:void 0,f=u?u.valueOf:void 0;t.exports=function(t,e,n,r,u,l,h){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!l(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var p=s;case"[object Set]":var d=1&r;if(p||(p=c),t.size!=e.size&&!d)return!1;var v=h.get(t);if(v)return v==e;r|=2,h.set(t,e);var y=a(p(t),p(e),r,u,l,h);return h.delete(t),y;case"[object Symbol]":if(f)return f.call(t)==f.call(e)}return!1}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){var r=n(77),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,a,s){var c=1&n,u=r(t),f=u.length;if(f!=r(e).length&&!c)return!1;for(var l=f;l--;){var h=u[l];if(!(c?h in e:i.call(e,h)))return!1}var p=s.get(t);if(p&&s.get(e))return p==e;var d=!0;s.set(t,e),s.set(e,t);for(var v=c;++l<f;){var y=t[h=u[l]],g=e[h];if(o)var b=c?o(g,y,h,e,t,s):o(y,g,h,t,e,s);if(!(void 0===b?y===g||a(y,g,n,o,s):b)){d=!1;break}v||(v="constructor"==h)}if(d&&!v){var m=t.constructor,x=e.constructor;m!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof x&&x instanceof x)&&(d=!1)}return s.delete(t),s.delete(e),d}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}},function(t,e,n){var r=n(7)(n(5),"DataView");t.exports=r},function(t,e,n){var r=n(7)(n(5),"Promise");t.exports=r},function(t,e,n){var r=n(7)(n(5),"Set");t.exports=r},function(t,e,n){var r=n(7)(n(5),"WeakMap");t.exports=r},function(t,e,n){var r=n(80),i=n(11);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var o=e[n],a=t[o];e[n]=[o,a,r(a)]}return e}},function(t,e,n){var r=n(75),i=n(168),o=n(82),a=n(52),s=n(80),c=n(81),u=n(17);t.exports=function(t,e){return a(t)&&s(e)?c(u(t),e):function(n){var a=i(n,t);return void 0===a&&a===e?o(n,t):r(e,a,3)}}},function(t,e,n){var r=n(51);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},function(t,e,n){var r=n(170),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)})),e}));t.exports=a},function(t,e,n){var r=n(171);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var r=n(39);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},function(t,e,n){var r=n(173);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(9),i=n(174),o=n(3),a=n(33),s=r?r.prototype:void 0,c=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(a(e))return c?c.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(32),i=n(27),o=n(3),a=n(30),s=n(43),c=n(17);t.exports=function(t,e,n){for(var u=-1,f=(e=r(e,t)).length,l=!1;++u<f;){var h=c(e[u]);if(!(l=null!=t&&n(t,h)))break;t=t[h]}return l||++u!=f?l:!!(f=null==t?0:t.length)&&s(f)&&a(h,f)&&(o(t)||i(t))}},function(t,e,n){var r=n(178),i=n(179),o=n(52),a=n(17);t.exports=function(t){return o(t)?r(a(t)):i(t)}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(51);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e){(function(){function t(t){t.remember("_draggable",this),this.el=t}t.prototype.init=function(t,e){var n=this;this.constraint=t,this.value=e,this.el.on("mousedown.drag",(function(t){n.start(t)})),this.el.on("touchstart.drag",(function(t){n.start(t)}))},t.prototype.transformPoint=function(t,e){var n=(t=t||window.event).changedTouches&&t.changedTouches[0]||t;return this.p.x=n.clientX-(e||0),this.p.y=n.clientY,this.p.matrixTransform(this.m)},t.prototype.getBBox=function(){var t=this.el.bbox();return this.el instanceof SVG.Nested&&(t=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(t.x=this.el.x(),t.y=this.el.y()),t},t.prototype.start=function(t){if("click"!=t.type&&"mousedown"!=t.type&&"mousemove"!=t.type||1==(t.which||t.buttons)){var e=this;if(this.el.fire("beforedrag",{event:t,handler:this}),!this.el.event().defaultPrevented){t.preventDefault(),t.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var n,r=this.getBBox();if(this.el instanceof SVG.Text)switch(n=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":n/=2;break;case"start":n=0}this.startPoints={point:this.transformPoint(t,n),box:r,transform:this.el.transform()},SVG.on(window,"mousemove.drag",(function(t){e.drag(t)})),SVG.on(window,"touchmove.drag",(function(t){e.drag(t)})),SVG.on(window,"mouseup.drag",(function(t){e.end(t)})),SVG.on(window,"touchend.drag",(function(t){e.end(t)})),this.el.fire("dragstart",{event:t,p:this.startPoints.point,m:this.m,handler:this})}}},t.prototype.drag=function(t){var e=this.getBBox(),n=this.transformPoint(t),r=this.startPoints.box.x+n.x-this.startPoints.point.x,i=this.startPoints.box.y+n.y-this.startPoints.point.y,o=this.constraint,a=n.x-this.startPoints.point.x,s=n.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:t,p:n,m:this.m,handler:this}),this.el.event().defaultPrevented)return n;if("function"==typeof o){var c=o.call(this.el,r,i,this.m);"boolean"==typeof c&&(c={x:c,y:c}),!0===c.x?this.el.x(r):!1!==c.x&&this.el.x(c.x),!0===c.y?this.el.y(i):!1!==c.y&&this.el.y(c.y)}else"object"==typeof o&&(null!=o.minX&&r<o.minX?a=(r=o.minX)-this.startPoints.box.x:null!=o.maxX&&r>o.maxX-e.width&&(a=(r=o.maxX-e.width)-this.startPoints.box.x),null!=o.minY&&i<o.minY?s=(i=o.minY)-this.startPoints.box.y:null!=o.maxY&&i>o.maxY-e.height&&(s=(i=o.maxY-e.height)-this.startPoints.box.y),null!=o.snapToGrid&&(r-=r%o.snapToGrid,i-=i%o.snapToGrid,a-=a%o.snapToGrid,s-=s%o.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:a,y:s},!0):this.el.move(r,i));return n},t.prototype.end=function(t){var e=this.drag(t);this.el.fire("dragend",{event:t,p:e,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(e,n){"function"!=typeof e&&"object"!=typeof e||(n=e,e=!0);var r=this.remember("_draggable")||new t(this);return(e=void 0===e||e)?r.init(n||{},e):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}).call(this)},function(t,e){!function(){"use strict";var t=function(t){return t.touches||(t.touches=[{clientX:t.clientX,clientY:t.clientY}]),t.touches};SVG.extend(SVG.Doc,SVG.Nested,{panZoom:function(e){if(this.off(".panZoom"),!1===e)return this;var n,r,i=(e=e||{}).zoomFactor||.03,o=e.zoomMin||Number.MIN_VALUE,a=e.zoomMax||Number.MAX_VALUE,s=!1,c=function e(n){(r=t(n)).length<2||(n.preventDefault(),this.fire("pinchZoomStart",{event:n}).event().defaultPrevented||(this.off("touchstart.panZoom",e),s=!0,SVG.on(document,"touchmove.panZoom",f,this,{passive:!1}),SVG.on(document,"touchend.panZoom",u,this,{passive:!1})))},u=function t(e){e.preventDefault(),s=!1,this.fire("pinchZoomEnd",{event:e}),SVG.off(document,"touchmove.panZoom",f),SVG.off(document,"touchend.panZoom",t),this.on("touchstart.panZoom",c)},f=function(e){e.preventDefault();var n=t(e),i=this.zoom(),s=Math.sqrt(Math.pow(r[0].clientX-r[1].clientX,2)+Math.pow(r[0].clientY-r[1].clientY,2))/Math.sqrt(Math.pow(n[0].clientX-n[1].clientX,2)+Math.pow(n[0].clientY-n[1].clientY,2));(i<o&&s>1||i>a&&s<1)&&(s=1);var c={x:n[0].clientX+.5*(n[1].clientX-n[0].clientX),y:n[0].clientY+.5*(n[1].clientY-n[0].clientY)},u=r[0].clientX+.5*(r[1].clientX-r[0].clientX),f=r[0].clientY+.5*(r[1].clientY-r[0].clientY),l=this.point(c.x,c.y),h=this.point(2*c.x-u,2*c.y-f),p=new SVG.Box(this.viewbox()).transform((new SVG.Matrix).translate(l.x,l.y).scale(s,0,0).translate(-h.x,-h.y));this.viewbox(p),r=n,this.fire("zoom",{box:p,focus:h})},l=function e(i){i.preventDefault(),this.off("mousedown.panZoom",e),r=t(i),s||(this.fire("panStart",{event:i}),n={x:r[0].clientX,y:r[0].clientY},SVG.on(document,"mousemove.panZoom",p,this),SVG.on(document,"mouseup.panZoom",h,this))},h=function t(e){e.preventDefault(),this.fire("panEnd",{event:e}),SVG.off(document,"mousemove.panZoom",p),SVG.off(document,"mouseup.panZoom",t),this.on("mousedown.panZoom",l)},p=function(e){e.preventDefault();var r=t(e),i={x:r[0].clientX,y:r[0].clientY},o=this.point(i.x,i.y),a=this.point(n.x,n.y),s=[a.x-o.x,a.y-o.y],c=new SVG.Box(this.viewbox()).transform((new SVG.Matrix).translate(s[0],s[1]));this.viewbox(c),n=i};return e.enableWheel&&this.on("wheel.panZoom",(function(t){if(t.preventDefault(),0!=t.deltaY){var e=this.zoom()-i*t.deltaY/Math.abs(t.deltaY),n=this.point(t.clientX,t.clientY);e>a&&(e=a),e<o&&(e=o),this.zoom(e,n)}})),this.on("touchstart.panZoom",c,this,{passive:!1}),this.on("mousedown.panZoom",l,this),this},zoom:function(t,e){var n=window.getComputedStyle(this.node),r=parseFloat(n.getPropertyValue("width")),i=parseFloat(n.getPropertyValue("height")),o=this.viewbox(),a=r/o.width,s=i/o.height,c=Math.min(a,s);if(null==t)return c;var u=c/t;u===1/0&&(u=Number.MIN_VALUE),e=e||new SVG.Point(r/2/a+o.x,i/2/s+o.y);var f=new SVG.Box(o).transform((new SVG.Matrix).scale(u,e.x,e.y));return this.fire("zoom",{box:f,focus:e}).event().defaultPrevented?this:this.viewbox(f)}}),SVG.extend(SVG.FX,{zoom:function(t,e){return this.add("zoom",[new SVG.Number(t)].concat(e||[]))}})}()},function(t,e){(function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(t,e){return this.add(t,e),!t.attr("in")&&this.autoSetIn&&t.attr("in",this.source),t.attr("result")||t.attr("result",t),t},blend:function(t,e,n){return this.put(new SVG.BlendEffect(t,e,n))},colorMatrix:function(t,e){return this.put(new SVG.ColorMatrixEffect(t,e))},convolveMatrix:function(t){return this.put(new SVG.ConvolveMatrixEffect(t))},componentTransfer:function(t){return this.put(new SVG.ComponentTransferEffect(t))},composite:function(t,e,n){return this.put(new SVG.CompositeEffect(t,e,n))},flood:function(t,e){return this.put(new SVG.FloodEffect(t,e))},offset:function(t,e){return this.put(new SVG.OffsetEffect(t,e))},image:function(t){return this.put(new SVG.ImageEffect(t))},merge:function(){var t=[void 0];for(var e in arguments)t.push(arguments[e]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,t)))},gaussianBlur:function(t,e){return this.put(new SVG.GaussianBlurEffect(t,e))},morphology:function(t,e){return this.put(new SVG.MorphologyEffect(t,e))},diffuseLighting:function(t,e,n){return this.put(new SVG.DiffuseLightingEffect(t,e,n))},displacementMap:function(t,e,n,r,i){return this.put(new SVG.DisplacementMapEffect(t,e,n,r,i))},specularLighting:function(t,e,n,r){return this.put(new SVG.SpecularLightingEffect(t,e,n,r))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(t,e,n,r,i){return this.put(new SVG.TurbulenceEffect(t,e,n,r,i))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(t){var e=this.put(new SVG.Filter);return"function"==typeof t&&t.call(e,e),e}}),SVG.extend(SVG.Container,{filter:function(t){return this.defs().filter(t)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(t){return this.filterer=t instanceof SVG.Element?t:this.doc().filter(t),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(t){return this.filterer&&!0===t&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",t)},result:function(t){return null==t?this.attr("result"):this.attr("result",t)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",t)},result:function(t){return null==t?this.attr("result"):this.attr("result",t)},toString:function(){return this.result()}}});var t={blend:function(t,e){return this.parent()&&this.parent().blend(this,t,e)},colorMatrix:function(t,e){return this.parent()&&this.parent().colorMatrix(t,e).in(this)},convolveMatrix:function(t){return this.parent()&&this.parent().convolveMatrix(t).in(this)},componentTransfer:function(t){return this.parent()&&this.parent().componentTransfer(t).in(this)},composite:function(t,e){return this.parent()&&this.parent().composite(this,t,e)},flood:function(t,e){return this.parent()&&this.parent().flood(t,e)},offset:function(t,e){return this.parent()&&this.parent().offset(t,e).in(this)},image:function(t){return this.parent()&&this.parent().image(t)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(t,e){return this.parent()&&this.parent().gaussianBlur(t,e).in(this)},morphology:function(t,e){return this.parent()&&this.parent().morphology(t,e).in(this)},diffuseLighting:function(t,e,n){return this.parent()&&this.parent().diffuseLighting(t,e,n).in(this)},displacementMap:function(t,e,n,r){return this.parent()&&this.parent().displacementMap(this,t,e,n,r)},specularLighting:function(t,e,n,r){return this.parent()&&this.parent().specularLighting(t,e,n,r).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(t,e,n,r,i){return this.parent()&&this.parent().turbulence(t,e,n,r,i).in(this)}};SVG.extend(SVG.Effect,t),SVG.extend(SVG.ParentEffect,t),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(t){this.attr("in",t)}}});var e={blend:function(t,e,n){this.attr({in:t,in2:e,mode:n||"normal"})},colorMatrix:function(t,e){"matrix"==t&&(e=i(e)),this.attr({type:t,values:void 0===e?null:e})},convolveMatrix:function(t){t=i(t),this.attr({order:Math.sqrt(t.split(" ").length),kernelMatrix:t})},composite:function(t,e,n){this.attr({in:t,in2:e,operator:n})},flood:function(t,e){this.attr("flood-color",t),null!=e&&this.attr("flood-opacity",e)},offset:function(t,e){this.attr({dx:t,dy:e})},image:function(t){this.attr("href",t,SVG.xlink)},displacementMap:function(t,e,n,r,i){this.attr({in:t,in2:e,scale:n,xChannelSelector:r,yChannelSelector:i})},gaussianBlur:function(t,e){null!=t||null!=e?this.attr("stdDeviation",o(Array.prototype.slice.call(arguments))):this.attr("stdDeviation","0 0")},morphology:function(t,e){this.attr({operator:t,radius:e})},tile:function(){},turbulence:function(t,e,n,r,i){this.attr({numOctaves:e,seed:n,stitchTiles:r,baseFrequency:t,type:i})}},n={merge:function(){var t;if(arguments[0]instanceof SVG.Set){var e=this;arguments[0].each((function(t){this instanceof SVG.MergeNode?e.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&e.put(new SVG.MergeNode(this))}))}else{t=Array.isArray(arguments[0])?arguments[0]:arguments;for(var n=0;n<t.length;n++)t[n]instanceof SVG.MergeNode?this.put(t[n]):this.put(new SVG.MergeNode(t[n]))}},componentTransfer:function(t){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(t){this[t]=new(SVG["Func"+t.toUpperCase()])("identity"),this.rgb.add(this[t]),this.node.appendChild(this[t].node)}.bind(this)),t)for(var e in t.rgb&&(["r","g","b"].forEach(function(e){this[e].attr(t.rgb)}.bind(this)),delete t.rgb),t)this[e].attr(t[e])},diffuseLighting:function(t,e,n){this.attr({surfaceScale:t,diffuseConstant:e,kernelUnitLength:n})},specularLighting:function(t,e,n,r){this.attr({surfaceScale:t,diffuseConstant:e,specularExponent:n,kernelUnitLength:r})}},r={distantLight:function(t,e){this.attr({azimuth:t,elevation:e})},pointLight:function(t,e,n){this.attr({x:t,y:e,z:n})},spotLight:function(t,e,n,r,i,o){this.attr({x:t,y:e,z:n,pointsAtX:r,pointsAtY:i,pointsAtZ:o})},mergeNode:function(t){this.attr("in",t)}};function i(t){return Array.isArray(t)&&(t=new SVG.Array(t)),t.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function o(t){if(!Array.isArray(t))return t;for(var e=0,n=t.length,r=[];e<n;e++)r.push(t[e]);return r.join(" ")}function a(){var t=function(){};for(var e in"function"==typeof arguments[arguments.length-1]&&(t=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var n in arguments[e])t(arguments[e][n],n,arguments[e])}["r","g","b","a"].forEach((function(t){r["Func"+t.toUpperCase()]=function(t){switch(this.attr("type",t),t){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}})),a(e,(function(t,e){var n=e.charAt(0).toUpperCase()+e.slice(1);SVG[n+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+n)),t.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})})),a(n,(function(t,e){var n=e.charAt(0).toUpperCase()+e.slice(1);SVG[n+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+n)),t.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})})),a(r,(function(t,e){var n=e.charAt(0).toUpperCase()+e.slice(1);SVG[n]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+n)),t.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})})),SVG.extend(SVG.MergeEffect,{in:function(t){return t instanceof SVG.MergeNode?this.add(t,0):this.add(new SVG.MergeNode(t),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",t)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}).call(this)},function(t,e,n){var r=n(184),i=n(82);t.exports=function(t,e){return r(t,e,(function(e,n){return i(t,n)}))}},function(t,e,n){var r=n(51),i=n(185),o=n(32);t.exports=function(t,e,n){for(var a=-1,s=e.length,c={};++a<s;){var u=e[a],f=r(t,u);n(f,u)&&i(c,o(u,t),f)}return c}},function(t,e,n){var r=n(47),i=n(32),o=n(30),a=n(2),s=n(17);t.exports=function(t,e,n,c){if(!a(t))return t;for(var u=-1,f=(e=i(e,t)).length,l=f-1,h=t;null!=h&&++u<f;){var p=s(e[u]),d=n;if(u!=l){var v=h[p];void 0===(d=c?c(v,p,h):void 0)&&(d=a(v)?v:o(e[u+1])?[]:{})}r(h,p,d),h=h[p]}return t}},function(t,e,n){var r=n(53),i=n(58),o=n(59);t.exports=function(t){return o(i(t,void 0,r),t+"")}},function(t,e,n){var r=n(49),i=n(188);t.exports=function t(e,n,o,a,s){var c=-1,u=e.length;for(o||(o=i),s||(s=[]);++c<u;){var f=e[c];n>0&&o(f)?n>1?t(f,n-1,o,a,s):r(s,f):a||(s[s.length]=f)}return s}},function(t,e,n){var r=n(9),i=n(27),o=n(3),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(a&&t&&t[a])}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e){t.exports=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},function(t,e,n){var r=n(194);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},function(t,e,n){var r=n(195);t.exports=function(t){return t?(t=r(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},function(t,e,n){var r=n(2),i=n(33),o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(i(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=s.test(t);return n||c.test(t)?u(t.slice(2),n?2:8):a.test(t)?NaN:+t}},function(t,e,n){var r=n(48),i=n(10),o=n(11);t.exports=function(t){return function(e,n,a){var s=Object(e);if(!i(e)){var c=r(n,3);e=o(e),n=function(t){return c(s[t],t,s)}}var u=t(e,n,a);return u>-1?s[c?e[u]:u]:void 0}}},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e,n){var r=n(20),i=n(201),o=n(47),a=n(202),s=n(203),c=n(67),u=n(70),f=n(204),l=n(205),h=n(77),p=n(206),d=n(31),v=n(207),y=n(208),g=n(71),b=n(3),m=n(28),x=n(212),w=n(2),k=n(214),j=n(11),_={};_["[object Arguments]"]=_["[object Array]"]=_["[object ArrayBuffer]"]=_["[object DataView]"]=_["[object Boolean]"]=_["[object Date]"]=_["[object Float32Array]"]=_["[object Float64Array]"]=_["[object Int8Array]"]=_["[object Int16Array]"]=_["[object Int32Array]"]=_["[object Map]"]=_["[object Number]"]=_["[object Object]"]=_["[object RegExp]"]=_["[object Set]"]=_["[object String]"]=_["[object Symbol]"]=_["[object Uint8Array]"]=_["[object Uint8ClampedArray]"]=_["[object Uint16Array]"]=_["[object Uint32Array]"]=!0,_["[object Error]"]=_["[object Function]"]=_["[object WeakMap]"]=!1,t.exports=function t(e,n,S,O,E,C){var P,G=1&n,V=2&n,A=4&n;if(S&&(P=E?S(e,O,E,C):S(e)),void 0!==P)return P;if(!w(e))return e;var M=b(e);if(M){if(P=v(e),!G)return u(e,P)}else{var D=d(e),I="[object Function]"==D||"[object GeneratorFunction]"==D;if(m(e))return c(e,G);if("[object Object]"==D||"[object Arguments]"==D||I&&!E){if(P=V||I?{}:g(e),!G)return V?l(e,s(P,e)):f(e,a(P,e))}else{if(!_[D])return E?e:{};P=y(e,D,G)}}C||(C=new r);var N=C.get(e);if(N)return N;C.set(e,P),k(e)?e.forEach((function(r){P.add(t(r,n,S,r,e,C))})):x(e)&&e.forEach((function(r,i){P.set(i,t(r,n,S,i,e,C))}));var T=A?V?p:h:V?keysIn:j,L=M?void 0:T(e);return i(L||e,(function(r,i){L&&(r=e[i=r]),o(P,i,t(r,n,S,i,e,C))})),P}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(16),i=n(11);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(16),i=n(29);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(16),i=n(50);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(16),i=n(83);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(78),i=n(83),o=n(29);t.exports=function(t){return r(t,o,i)}},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(40),i=n(209),o=n(210),a=n(211),s=n(68);t.exports=function(t,e,n){var c=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new c(+t);case"[object DataView]":return i(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,n);case"[object Map]":return new c;case"[object Number]":case"[object String]":return new c(t);case"[object RegExp]":return o(t);case"[object Set]":return new c;case"[object Symbol]":return a(t)}}},function(t,e,n){var r=n(40);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(9),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},function(t,e,n){var r=n(213),i=n(45),o=n(46),a=o&&o.isMap,s=a?i(a):r;t.exports=s},function(t,e,n){var r=n(31),i=n(6);t.exports=function(t){return i(t)&&"[object Map]"==r(t)}},function(t,e,n){var r=n(215),i=n(45),o=n(46),a=o&&o.isSet,s=a?i(a):r;t.exports=s},function(t,e,n){var r=n(31),i=n(6);t.exports=function(t){return i(t)&&"[object Set]"==r(t)}},function(t,e,n){},function(t,e,n){"use strict";n.r(e),n.d(e,"Raphy",(function(){return lt})),n.d(e,"Element",(function(){return x})),n.d(e,"BaseElement",(function(){return m}));var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=n(12),c=n.n(s),u=n(13),f=n.n(u),l=n(14),h=n.n(l),p=n(4),d=n.n(p),v=n(35),y=n.n(v);function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var b={x:0,y:0,width:110,height:50,r:4,className:"Raphy-element",defaultAttr:{fill:"white",stroke:"#8b9cac","stroke-width":1.5,cursor:"move"}},m=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i()(this,t),this.options=d()(e,b),this.options.color&&(this.options.defaultAttr.stroke=this.options.color),this.options.anchor||(this.options.defaultAttr["stroke-dasharray"]=4);var n=this.options,r=n.id,o=n.x,a=void 0===o?0:o,s=n.y,c=void 0===s?0:s,u=n.type,f=n.width,l=n.height,h=n.label,p=n.metadata;this.id=r,this.type=u,this.label=h,this.width=f,this.height=l,this.x=a,this.y=c,this.metadata=p,this.group=null,this.drawer=null,this.store={},this.isDragging=!1,this.currentConnectible=!1,this.connections=[]}return a()(t,[{key:"draw",value:function(t){this.raphy=t,this.store=t.store,this.drawer=t.drawer,this.className=this.options.className||this.store.options.elementClassName;var e=this.drawShape();this.svgElement=e,this.group=this.drawer.nested().addClass(this.className).add(e).draggable(),this.group.x(this.x).y(this.y).front(),this.addBuildInMarker(),this.addEventListener()}},{key:"drawShape",value:function(){var t=this.options,e=t.width,n=t.height,r=t.defaultAttr,i=t.r,o=this.drawer.rect(e,n).radius(i);return o.attr(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){y()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},r)).addClass("main-el"),o.remember("element",this),o}},{key:"addBuildInMarker",value:function(){}},{key:"addMarker",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"topLeft",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=this.getKeyPointCoord(e),o=i.x,a=i.y;t.x(o).y(a).addClass("marker-el").dmove(n,r),this.group.add(t)}},{key:"addEventListener",value:function(){var t=this;this.group.on("click",(function(e){t.applyFocusStatus(),t.raphy.emit("element.click",t,e)}))}},{key:"applyFocusStatus",value:function(){this.store.setFocusElement(this.group.id());var t="".concat(this.className,"--focus");this.group.addClass(t)}},{key:"applyConnectibleStatus",value:function(){this.currentConnectible=!0;var t="".concat(this.className,"--connectible");this.group.addClass(t)}},{key:"removeConnectibleStatus",value:function(){this.currentConnectible=!1;var t="".concat(this.className,"--connectible"),e="".concat(this.className,"--dragover");this.group.removeClass(t).removeClass(e)}},{key:"setDraggingStatus",value:function(t){this.isDragging=t}},{key:"addConnection",value:function(t){this.connections.push(t)}},{key:"removeConnection",value:function(t){var e=this.connections.indexOf(t);this.connections.splice(e,1)}},{key:"getKeyPointCoord",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.svgElement.bbox(),r=n.x,i=n.y,o=n.x2,a=n.y2,s=n.cx,c=n.cy,u=0,f=0;switch(t){case"top":u=s,f=i;break;case"right":u=o,f=c;break;case"bottom":u=s,f=a;break;case"left":u=r,f=c;break;case"topLeft":u=r,f=i;break;case"topRight":u=o,f=i;break;case"bottomLeft":u=r,f=a;break;case"bottomRight":u=o,f=a;break;default:u=s,f=c}if(e){var l=this.group.x(),h=this.group.y();u+=l,f+=h}return{x:u,y:f}}},{key:"containsPoint",value:function(t){var e=this.getKeyPointCoord("topLeft",!0),n=e.x,r=e.y;return t.x>=n&&t.x<=n+this.width&&t.y>=r&&t.y<=r+this.height}},{key:"setData",value:function(t,e){this.metadata[t]=e}},{key:"remove",value:function(){this.group.remove(),this.store.removeElement(this)}}]),t}(),x=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i()(this,e);var r={connectionPointRadius:4,connectionPointAttr:{"stroke-width":1,cursor:"crosshair","fill-opacity":1,stroke:"#8b9cac"}},o=d()(n,r);return(t=c()(this,f()(e).call(this,o))).options.color&&(t.options.connectionPointAttr.stroke=t.options.color),t.connectionPoints=[],t.connections=[],t}return h()(e,t),a()(e,[{key:"addBuildInMarker",value:function(){this.setLabel(this.label),this.setIdLabel(this.id),this.addIcon(),this.addConnectionPoints()}},{key:"setLabel",value:function(t){t&&(this.labelEl&&this.labelEl.remove(),this.label=t,this.labelEl=this.drawer.text(this.label).font({size:12,anchor:"start",fill:this.options.color}).addClass("marker-text"),this.addMarker(this.labelEl,"topLeft",40,10))}},{key:"setIdLabel",value:function(t){t&&(this.idLabel&&this.idLabel.remove(),this.id=t,this.idLabel=this.drawer.text(this.id).font({size:12,anchor:"start",fill:this.options.color}).addClass("marker-text"),this.addMarker(this.idLabel,"topLeft",40,28))}},{key:"addIcon",value:function(){var t=this.options,e=t.icon,n=t.iconType,r=void 0===n?"svg":n,i=t.color;if(e)if("url"===r){var o=this.drawer.image(e).addClass("marker-image").size(30,30);this.addMarker(o,"topLeft",6,10)}else{var a=this.drawer.rect(30,30).radius(5).fill(i).addClass("marker-image-bg");this.addMarker(a,"topLeft",6,10);var s=this.drawer.group().addClass("marker-image").attr("fill-rule","evenodd");s.svg(e),this.addMarker(s,"topLeft",9,13)}}},{key:"addAlertIcon",value:function(){this.iconEl=this.drawer.path("m0,0l0,10.687459l4.499979,0l0,-10.687459l-4.499979,0zm0,14.249946l0,3.562486l4.499979,0l0,-3.562486l-4.499979,0z"),this.iconEl.size(3,12).addClass("marker-alert"),this.addMarker(this.iconEl,"topRight",-8,3)}},{key:"removeAlertIcon",value:function(){this.iconEl&&this.iconEl.remove()}},{key:"addRemoveBtn",value:function(){var t=this;this.removeBtn&&this.removeBtn.remove(),this.removeBtn=this.drawer.path("M13.4142136,12 L19.0710678,17.6568542 L17.6568542,19.0710678 L12,13.4142136 L6.34314575,19.0710678 L4.92893219,17.6568542 L10.5857864,12 L4.92893219,6.34314575 L6.34314575,4.92893219 L12,10.5857864 L17.6568542,4.92893219 L19.0710678,6.34314575 L13.4142136,12 Z").addClass("marker-tool"),this.removeBtn.size(10,10).style({cursor:"pointer"}),this.removeBtn.click((function(){return t.remove()})),this.addMarker(this.removeBtn,"topRight",6,-5)}},{key:"addConnectionPoints",value:function(){var t=this,e=0-this.options.connectionPointRadius;["top","right","bottom","left"].forEach((function(n){var r=t.drawConnectionPoint();r.remember({parentElement:t,type:"connectionPoint"}),t.addMarker(r,n,e,e),t.connectionPoints.push(r)}))}},{key:"drawConnectionPoint",value:function(){var t=this.options,e=t.connectionPointRadius,n=t.connectionPointAttr,r=t.defaultAttr,i=this.drawer.circle(2*e).addClass("marker-point").draggable();return i.attr(n).fill(r.fill),i}}]),e}(m),w=n(34),k=n.n(w),j=n(84),_=n(18),S=n.n(_),O=n(85),E=n.n(O),C=n(86),P=n.n(C),G=function(){function t(e,n,r,o,a){i()(this,t),this.tree=o,this.reset(e,n,r,o,a)}return a()(t,[{key:"reset",value:function(t,e,n,r,i){return this.id=e,this.parentId=n,this.treeId=r.id,this.prelim=0,this.modifier=0,this.leftNeighborId=null,this.stackParentId=i,this.pseudo="pseudo"===t||t.pseudo,this.children=[],this.collapsed=t.collapsed,this.text=t.title,this.width=t.width||60,this.height=t.height||60,this.pseudo&&(this.width=1,this.height=1),this.type=t.type,this.realId=t.id,this.realParentId=t.parent,this}},{key:"parent",value:function(){return this.lookupNode(this.parentId)}},{key:"leftNeighbor",value:function(){if(this.leftNeighborId)return this.lookupNode(this.leftNeighborId)}},{key:"rightNeighbor",value:function(){if(this.rightNeighborId)return this.lookupNode(this.rightNeighborId)}},{key:"leftSibling",value:function(){var t=this.leftNeighbor();if(t&&t.parentId===this.parentId)return t}},{key:"rightSibling",value:function(){var t=this.rightNeighbor();if(t&&t.parentId===this.parentId)return t}},{key:"lookupNode",value:function(t){return this.getTreeNodeDb().get(t)}},{key:"getTreeNodeDb",value:function(){return this.tree.getNodeDb()}},{key:"childrenCount",value:function(){return this.collapsed||!this.children?0:this.children.length}},{key:"childAt",value:function(t){return this.getTreeNodeDb().get(this.children[t])}},{key:"firstChild",value:function(){return this.childAt(0)}},{key:"lastChild",value:function(){return this.childAt(this.children.length-1)}},{key:"size",value:function(){return this.pseudo?-this.tree.CONFIG.subTeeSeparation:60}},{key:"childrenCenter",value:function(){var t=this.firstChild(),e=this.lastChild();return t.prelim+(e.prelim-t.prelim+e.size())/2}},{key:"leftMost",value:function(t,e){if(t>=e)return this;if(0!==this.childrenCount())for(var n=0,r=this.childrenCount();n<r;n++){var i=this.childAt(n).leftMost(t+1,e);if(i)return i}}}]),t}(),V=function(){function t(e,n){i()(this,t),this.reset(e,n)}return a()(t,[{key:"reset",value:function(t,e){this.db=[];var n=this;return function t(r,i){var o=n.createNode(r,i,e,null);if(r.children){if(r.childrenDropLevel&&r.childrenDropLevel>0)for(;r.childrenDropLevel--;)(o=n.createNode({pseudo:!0},o.id,e,null)).children=[];if(r.parent&&r.children.length>2&&!n.hasGrandChildren(r)){var a=o.id,s=P()(r.children,"type");Object.keys(s).forEach((function(t){o=n.createNode({pseudo:!0,type:t},a,e,null);var r=s[t],i=o.id;o.stackChildren=[],r.forEach((function(t,r){o=n.createNode(t,o.id,e,i),r+1===t.length&&(o.children=[])}))}))}else{r.children.length<1&&(r.stackChildren=!0);var c=r.stackChildren&&!n.hasGrandChildren(r)?o.id:null;null!==c&&(o.stackChildren=[]),r.children.forEach((function(r,i){null!==c?(o=n.createNode(r,o.id,e,c),i+1===r.length&&(o.children=[])):t(r,o.id)}))}}}(t,-1),this}},{key:"createNode",value:function(t,e,n,r){var i=this.db.length,o=new G(t,i,e,n,r);if(this.db.push(o),e>=0){var a=this.get(e);if(t.position)if("left"===t.position)a.children.push(o.id);else if("right"===t.position)a.children.splice(0,0,o.id);else if("center"===t.position)a.children.splice(Math.floor(a.children.length/2),0,o.id);else{var s=parseInt(t.position);1===a.children.length&&s>0?a.children.splice(0,0,o.id):a.children.splice(Math.max(s,a.children.length-1),0,o.id)}else a.children.push(o.id)}return r&&(this.get(r).stackParent=!0,this.get(r).stackChildren.push(o.id)),o}},{key:"get",value:function(t){return this.db[t]}},{key:"hasGrandChildren",value:function(t){for(var e=t.children.length;e--;)if(t.children[e].children&&t.children[e].children.length)return!0;return!1}}]),t}(),A=function(){function t(e,n,r){i()(this,t),this.reset(e,n,r),this.CONFIG={maxDepth:100,rootOrientation:"WEST",nodeAlign:"BOTTOM",levelSeparation:100,siblingSeparation:30,subTeeSeparation:5,hideRootNode:!1,animateOnInit:!1,animateOnInitDelay:500,padding:15,margin:100,connectors:{type:"step",style:{stroke:"black"},stackIndent:15}}}return a()(t,[{key:"reset",value:function(t,e,n){return this.initJsonConfig=t,this.initTreeId=e,this.treeStore=n,this.id=e,this.nodeDB=new V(t.nodeStructure,this),this}},{key:"getNodeDb",value:function(){return this.nodeDB}},{key:"addNode",value:function(t,e){}},{key:"positionTree",value:function(){var t=this.getRootNode();this.resetLevelData();var e=this.treeStore.getTree(this.id-1),n=0;if(e){var r=e.nodeDB.db;n=r[r.length-1].Y+this.CONFIG.margin}this.firstWalk(t,0),this.secondWalk(t,0,n,0)}},{key:"resetLevelData",value:function(){this.lastNodeOnLevel=[],this.levelMaxDim=[]}},{key:"calcLevelDim",value:function(t,e){return this.levelMaxDim[e]={width:Math.max(this.levelMaxDim[e]?this.levelMaxDim[e].width:0,t.width),height:Math.max(this.levelMaxDim[e]?this.levelMaxDim[e].height:0,t.height)},this}},{key:"firstWalk",value:function(t,e){t.prelim=null,t.modifier=null,this.setNeighbors(t,e),this.calcLevelDim(t,e);var n=t.leftSibling(),r=t.childrenCount();if(0===r||e===this.CONFIG.maxDepth)t.prelim=n?n.prelim+n.size()+this.CONFIG.siblingSeparation:0;else{for(var i=0,o=r;i<o;i++)this.firstWalk(t.childAt(i),e+1);var a=t.childrenCenter()-t.size()/2;n?(t.prelim=n.prelim+n.size()+this.CONFIG.siblingSeparation,t.modifier=t.prelim-a,this.apportion(t,e)):t.prelim=a,t.stackParent?t.modifier+=this.nodeDB.get(t.stackChildren[0]).size()/2+15:t.stackParentId&&(t.prelim=0)}}},{key:"apportion",value:function(t,e){for(var n=t.firstChild(),r=n.leftNeighbor(),i=1,o=this.CONFIG.maxDepth-e;n&&r&&i<=o;){for(var a=0,s=0,c=r,u=n,f=0;f<i;f++)c=c.parent(),u=u.parent(),s+=c.modifier,a+=u.modifier,u.stackParent&&(a+=u.size()/2);var l=r.prelim+s+r.size()+this.CONFIG.subTeeSeparation-(n.prelim+a);if(l>0){for(var h=t,p=0;h&&h.id!==c.id;)h=h.leftSibling(),p++;if(h)for(var d=t,v=l/p;d.id!==c.id;)d.prelim+=l,d.modifier+=l,l-=v,d=d.leftSibling()}i++,(n=0===n.childrenCount()?t.leftMost(0,i):n=n.firstChild())&&(r=n.leftNeighbor())}}},{key:"secondWalk",value:function(t,e,n,r){if(e<=this.CONFIG.maxDepth){var i=t.prelim+n,o=r,a=this.CONFIG,s=a.nodeAlign,c=a.rootOrientation,u=0,f=0;if("NORTH"===c||"SOUTH"===c?(u=this.levelMaxDim[e].height,f=t.height,t.pseudo&&(t.height=u)):"WEST"!==c&&"EAST"!==c||(u=this.levelMaxDim[e].width,f=t.width,t.pseudo&&(t.width=u)),t.X=i,t.pseudo?"NORTH"===c||"WEST"===c?t.Y=o:"SOUTH"!==c&&"EAST"!==c||(t.Y=o+(u-f)):t.Y="CENTER"===s?o+(u-f)/2:"TOP"===s?o+(u-f):o,"WEST"===c||"EAST"===c){var l=t.X;t.X=t.Y,t.Y=l}if("SOUTH"===c?t.Y=-t.Y-f:"EAST"===c&&(t.X=-t.X-f),0!==t.childrenCount()&&(0===t.id&&this.CONFIG.hideRootNode?this.secondWalk(t.firstChild(),e+1,n+t.modifier,r):this.secondWalk(t.firstChild(),e+1,n+t.modifier,r+u+this.CONFIG.levelSeparation)),t.rightSibling()){var h=t.pseudo||t.rightSibling().childrenCount()<1?0:60;this.secondWalk(t.rightSibling(),e,n+h,r)}}}},{key:"setNeighbors",value:function(t,e){t.leftNeighborId=this.lastNodeOnLevel[e],t.leftNeighborId&&(t.leftNeighbor().rightNeighborId=t.id),this.lastNodeOnLevel[e]=t.id}},{key:"getRootNode",value:function(){return this.nodeDB.get(0)}}]),t}(),M=function(){function t(e){i()(this,t),this.store=[]}return a()(t,[{key:"createTree",value:function(t){var e=this.store.length,n=new A(t,e,this);return this.store.push(n),n}},{key:"getTree",value:function(t){return this.store[t]}},{key:"destroy",value:function(t){console.log("destroy treeStore",t)}}]),t}(),D=n(55),I=n.n(D),N=(n(180),n(181),n(19)),T=n.n(N);SVG.ForeignObject=function(){this.constructor.call(this,SVG.create("foreignObject")),this.type="foreignObject"},SVG.ForeignObject.prototype=new SVG.Shape,SVG.extend(SVG.ForeignObject,{appendChild:function(t,e){var n="string"==typeof t?document.createElement(t):t;if("object"==T()(e))for(var r in e)n[r]=e[r];return this.node.appendChild(n),this},getChild:function(t){return this.node.childNodes[t]}}),SVG.extend(SVG.Container,{foreignObject:function(t,e){return this.put(new SVG.ForeignObject).size(null==t?100:t,null==e?100:e)}});n(182);var L=n(87),B=n.n(L);function z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var F={dot:[{color:"#aaaaaa",thickness:1,markup:"rect"}],mesh:[{color:"#aaaaaa",thickness:1,markup:"path",render:function(t){var e=t.width,n=t.height,r=t.thickness;return e-r>=0&&n-r>=0?["M",e,0,"H0 M0 0 V0",n].join(" "):"M 0 0 0 0"}}]},R=function(){function t(e,n){i()(this,t),this.mountHtmlId=e,this.raphy=n,this.store=n.store,this.options=n.options,this.initCanvas()}return a()(t,[{key:"initCanvas",value:function(){var t=document.getElementById(this.mountHtmlId);if(!t)throw new Error("Element with id [".concat(this.mountHtmlId,"] not found."));this.wrapperId=this.createWrapperDiv(t,this.mountHtmlId);var e=this.options,n=e.width,r=e.height,i=e.drawGrid,o=B()(this.options,["zoomMin","zoomMax","enableWheel"]);this.drawer=I()(this.wrapperId).size(n,r).panZoom(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?z(Object(n),!0).forEach((function(e){y()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({zoomMin:.8,zoomMax:3,enableWheel:!0},o)),this.setSvgId(),i&&this.drawGrid(),this.addEventListener()}},{key:"createWrapperDiv",value:function(t,e){var n="__wrapper__".concat(e),r=document.createElement("div");return r.id=n,r.style.cssText="width: 100%; height: 100%; margin: 0, padding: 0, position: relative",t.append(r),n}},{key:"setSvgId",value:function(){var t=document.getElementById(this.wrapperId).childNodes[0];t&&(this.svgId="__svg__".concat(this.mountHtmlId),t.id=this.svgId,t.addEventListener("click",this.clearFocus.bind(this),!0),t.addEventListener("drop",this.raphy.addElementByDrop.bind(this.raphy)),t.addEventListener("dragover",this.handleDragOver.bind(this)))}},{key:"setOptions",value:function(t){this.options=d()(t,this.options);var e=this.options,n=e.width,r=e.height,i=e.drawGrid;this.drawer.size(n,r),i&&this.drawGrid()}},{key:"setGrid",value:function(t){this.options.drawGrid=t,this.drawGrid()}},{key:"setGridSize",value:function(t){this.options.gridSize=t,this.drawGrid()}},{key:"drawGrid",value:function(){var t=this,e=this.options,n=e.gridSize,r=e.width,i=e.height,o=e.drawGrid,a="",s="",c="";(o.name?F[o.name]:F.dot).forEach((function(e,u){(e=d()(o.option&&o.option[u],e)).width=n*(e.scaleFactor||1),e.height=n*(e.scaleFactor||1);var f=e,l=f.color,h=f.thickness,p=f.markup,v=f.render;if("rect"===p)c=t.drawer.pattern(e.width,e.height,(function(t){t.rect(h,h).fill(l)}));else if("path"===p){var y=v({width:e.width,height:e.height,thickness:h});c=t.drawer.pattern(e.width,e.height,(function(t){t.path(y).attr({stroke:l,"stroke-width":h})}))}var g=t.drawer.rect(r,i).fill(c);s+=g.svg(),g.remove(),a+=c.svg()}));var u="<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' \nversion='1.1' width='100%' height='100%'><defs>".concat(a,"</defs>").concat(s,"</svg>"),f="url(data:image/svg+xml;base64,".concat(btoa(u),")");document.getElementById(this.svgId).style.backgroundImage=f}},{key:"clearGrid",value:function(){document.getElementById(this.svgId).style.backgroundImage="none"}},{key:"addEventListener",value:function(){var t=this;this.drawer.on("click",(function(e){t.raphy.emit("canvas.click",e)})),this.drawer.on("dblclick",(function(e){t.raphy.emit("canvas.dblclick",e)})),this.drawer.on("contextmenu",(function(e){t.options.preventContextMenu&&e.preventDefault(),t.raphy.emit("canvas.contextmenu",e)}))}},{key:"clearFocus",value:function(){var t=this.store,e=t.focusElement,n=t.focusLine,r=I.a.get(e);if(r){this.store.setFocusElement(null);var i="".concat(this.options.elementClassName,"--focus");r.removeClass(i)}n&&this.store.connections[n].onBlur()}},{key:"handleDragOver",value:function(t){t.preventDefault()}}]),t}(),Y=n(88),U=n.n(Y),X=n(54),W=n.n(X),$=n(89),Z=n.n($),H=function(){function t(){i()(this,t),this.elements=[],this.isDragging=!1,this.draggingElement=null,this.options={},this.tmpConnectibleElements=[],this.connections={}}return a()(t,[{key:"setDraggingStatus",value:function(t){this.isDragging=t}},{key:"setFocusElement",value:function(t){this.focusElement=t}},{key:"setFocusLine",value:function(t){this.focusLine=t}},{key:"setDraggingElement",value:function(t){this.draggingElement=t}},{key:"setOptions",value:function(t){this.options=t}},{key:"addElement",value:function(t){this.elements.push(t)}},{key:"removeElement",value:function(t){var e=this,n=t.id,r=W()(this.elements,{id:n});this.elements[r]=null,this.elements.splice(r,1),Object.keys(this.connections).forEach((function(t){t.indexOf(n)>-1&&(e.connections[t].remove(),e.removeConnection(t))}))}},{key:"getElement",value:function(t){return Z()(this.elements,{id:t})}},{key:"addTmpConnectibleElements",value:function(t){this.tmpConnectibleElements.push(t)}},{key:"clearTmpConnectibleElements",value:function(){this.tmpConnectibleElements=[]}},{key:"setConnection",value:function(t,e){this.connections[t]=e}},{key:"removeConnection",value:function(t){this.connections[t]=null,delete this.connections[t]}},{key:"export",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=[],r=[];return this.elements.forEach((function(r){var i=r.type,o=r.label,a=r.metadata,s=r.id,c=[],u=0,f=[];r.connections.forEach((function(n){var r=t.connections[n],i=n.split("@@");if(i[0]===s)e||c.push({type:r.type,id:i[1]});else if("secondary"===r.type)f.push(i[0]);else{var o=U()(i,1);u=o[0]}}));var l={id:s,type:i,label:o,metadata:a,parent:u,children:c,subParent:f};n.push(l)})),e?n:(Object.keys(this.connections).forEach((function(e){var n=t.connections[e],i={from:n.source.id,to:n.target.id};r.push(i)})),{elements:n,connections:r})}},{key:"clear",value:function(){this.elements=[],this.isDragging=!1,this.draggingElement=null,this.options={},this.tmpConnectibleElements=[],this.connections={}}}]),t}(),q=function(){function t(e,n){i()(this,t),this.canvas=e,this.options=n}return a()(t,[{key:"draw",value:function(t,e){var n={stroke:"#4b5f71",fill:"none","stroke-width":2,cursor:"pointer"},r=this.getTransformedCoord(t),i=this.getTransformedCoord(e),o=this.canvas.line(r.x,r.y,i.x,i.y).attr(n);return o.marker("end",4,5,(function(t){t.path("M0,0 L0,6 L7,3 z").center(.8,2.5).attr({fill:n.stroke})})),o}},{key:"getTransformedCoord",value:function(t){var e=t.bbox(),n=e.cx,r=e.cy,i=t.parent();return{x:n+i.x(),y:r+i.y()}}},{key:"refresh",value:function(t,e,n){var r=this.getTransformedCoord(e),i=this.getTransformedCoord(n);t.plot(r.x,r.y,i.x,i.y)}}]),t}(),K=n(36),J=n.n(K),Q=n(53),tt=n.n(Q),et={stroke:"#00aa72",fill:"none","stroke-width":2,cursor:"pointer",threshold:64,tension:.5},nt=function(t){function e(t,n){var r;return i()(this,e),(r=c()(this,f()(e).call(this,t,n))).options=d()(r.options,et),r.from={x:0,y:0},r.to={x:0,y:0},r.line=null,r.arrow=null,r}return h()(e,t),a()(e,[{key:"draw",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;if(e=tt()(e),this.isPlainCoordinate(e)){var i=J()(e);this.from=i[0],this.to=i[1],r=this.getPathData()}else this.from=this.getElementCoordinate(e[0]),this.to=this.getElementCoordinate(e[1]),r=this.getPathData();return this.line=this.canvas.path(r).attr(this.options).addClass(this.options.className||"Raphy-line"),this.setMarker(),this.line}},{key:"setMarker",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.line,n=Math.abs(this.from.x-this.to.x)>this.options.threshold?"horizon":"vertical",r=[];r="horizon"===n?[[0,0],[3,3],[0,6]]:[[0,0],[3,3],[6,0]],this.arrow?this.arrow.update((function(e){e.polyline(r).fill("none").stroke({width:1,color:t.options.stroke})})):(e.marker("end",6,6,(function(e){e.polyline(r).fill("none").stroke({width:1,color:t.options.stroke})})),this.arrow=e.reference("marker-end"))}},{key:"isPlainCoordinate",value:function(t){Array.isArray(t)&&(t=J()(t)[0]);return t&&"object"===T()(t)&&"x,y"===Object.keys(t).join(",")}},{key:"getPathData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.from,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.to,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.tension,r=t.x,i=t.y,o=e.x,a=e.y,s=(o-r)*n,c=r+s,u=i,f=o-s,l=a;return"M ".concat(r," ").concat(i," C ").concat(c," ").concat(u," ").concat(f," ").concat(l," ").concat(o," ").concat(a)}},{key:"refresh",value:function(t,e,n){if(this.isPlainCoordinate(e)&&void 0===n){var r=J()(e);this.from=r[0],this.to=r[1]}else this.from=this.getElementCoordinate(e),this.to=this.getElementCoordinate(n);var i=this.getPathData();t.plot(i),this.setMarker(t)}}]),e}(function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i()(this,t),this.canvas=e,this.options=n}return a()(t,[{key:"draw",value:function(){}},{key:"getElementCoordinate",value:function(t){var e=t.bbox(),n=e.cx,r=e.cy,i=t.parent();return{x:n+i.x(),y:r+i.y()}}},{key:"refresh",value:function(){}},{key:"setMarker",value:function(){}}]),t}()),rt=function(){function t(e){i()(this,t),this.raphy=e,this.canvas=e.drawer,this.store=e.store,this.options=e.options,"bezier"===this.options.lineType?this.line=new nt(this.canvas):this.line=new q(this.canvas),this.placeholderPoint={},this.tmpConnection=null,this.isDragging=!1,this.currentSource=null,this.currentTarget=null,this.currentSourcePoint=null,this.currentTargetPoint=null}return a()(t,[{key:"register",value:function(t){var e=this,n=t.group;this.addEventListener(n,t),t.connectionPoints.forEach((function(n){e.addEventListener(n,t)}))}},{key:"addEventListener",value:function(t,e){var n=this;t.on("dragstart.raphy",(function(r){n.onDragStart(t,e,r)})),t.on("dragend.raphy",(function(r){n.onDragEnd(t,e,r)})),t.on("dragmove.raphy",(function(r){n.onDragMove(t,e),n.raphy.emit("element.moved",r,t,e)})),t.on("mouseover.raphy",(function(){n.onMouseOver(t,e)})),t.on("mouseout.raphy",(function(){n.onMouseOut(t,e)})),t.on("drop",(function(t){t.stopPropagation(),n.raphy.addElementByDrop(t,e,!0)}))}},{key:"onDragStart",value:function(t,e){var n=this;e.setDraggingStatus(!0),this.isDragging=!0,this.currentSource=e,"connectionPoint"===t.remember("type")&&(this.placeholderPoint=t.clone(),this.placeholderPoint.addClass("".concat(this.options.elementClassName,"__marker-point--dragging")),t.style("visibility: hidden"),this.tmpConnection=this.line.draw(this.placeholderPoint,t),this.tmpConnection.back()),this.canvas.addClass("Raphy--dragging"),e.group.addClass("".concat(this.options.elementClassName,"--dragging")),this.raphy.highlightConnectibleElement(e),Object.keys(this.store.connections).forEach((function(t){n.store.connections[t].onBlur()}))}},{key:"onDragMove",value:function(t,e){"connectionPoint"===t.remember("type")?this.line.refresh(this.tmpConnection,this.placeholderPoint,t):this.raphy.refreshConnection(e)}},{key:"onDragEnd",value:function(t,e){if(e.setDraggingStatus(!1),this.isDragging=!1,"connectionPoint"===t.remember("type")){var n=this.placeholderPoint.x(),r=this.placeholderPoint.y();t.x(n).y(r),t.style("visibility",null),this.placeholderPoint.remove(),this.placeholderPoint=null,this.tmpConnection.remove(),this.tmpConnection=null,this.raphy.addConnection(this.currentSource,this.currentTarget)}this.currentSource=null,this.currentTarget=null,this.canvas.removeClass("Raphy--dragging"),e.group.removeClass("".concat(this.options.elementClassName,"--dragging")),this.raphy.unHighlightConnectibleElement()}},{key:"onMouseOver",value:function(t,e){this.isDragging&&e.id!==this.currentSource.id&&(e.group.addClass("".concat(this.options.elementClassName,"--dragover")),this.currentTarget=e)}},{key:"onMouseOut",value:function(t,e){this.isDragging&&e.id!==this.currentSource.id&&(e.group.removeClass("".concat(this.options.elementClassName,"--dragover")),this.currentTarget=null)}}]),t}(),it=n(90),ot=n.n(it),at=function(){function t(){i()(this,t)}return a()(t,null,[{key:"angle",value:function(t,e,n){if(n)return Math.abs(this.angle(t,n)-this.angle(e,n));for(var r=Math.atan2(e.y-t.y,e.x-t.x);r<0;)r+=2*Math.PI;return r}},{key:"rad",value:function(t){return t*Math.PI/180}},{key:"deg",value:function(t){return 180*t/Math.PI}},{key:"movePoint",value:function(t,e,n){var r=this.angle(t,e);return this.offset(t,Math.cos(r)*n,-Math.sin(r)*n)}},{key:"offset",value:function(t,e,n){return t.x+=e,t.y+=n,t}},{key:"lerp",value:function(t,e,n){return t+n*(e-t)}},{key:"midPoint",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;return{x:this.lerp(t.x,e.x,n),y:this.lerp(t.y,e.y,n)}}}]),t}(),st=function(){function t(){i()(this,t),this.opposites={N:"S",S:"N",E:"W",W:"E"}}return a()(t,[{key:"router",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.getAnchor(t),i=this.getAnchor(e),o=ot()(n);o.unshift(r),o.push(i);for(var a=null,s=[],c=0,u=o.length-1;c<u;c++){var f=null,l=o[c],h=o[c+1],p=!!this.getBearing(l,h);0===c?c+1===u?p||(f=this.elementToElement(l,h,t,e)):p||(f=this.elementToVertex(l,h,t)):c+1===u?p||(f=this.vertexToElement(l,h,e,a)):p||(f=this.vertexToVertex(l,h,a)),f&&(Array.prototype.push.apply(s,f.points),a=f.direction),c+1<u&&s.push(h)}return s}},{key:"getAnchor",value:function(t,e){return t.getKeyPointCoord(e,!0)}},{key:"getBearing",value:function(t,e){return t.x===e.x?t.y>e.y?"N":"S":t.y===e.y?t.x>e.x?"W":"E":null}},{key:"freeJoin",value:function(t,e,n){var r={x:t.x,y:e.y};return n.containsPoint(r)&&(r={x:e.x,y:t.y}),r}},{key:"getBBoxSize",value:function(t,e){return t["W"===e||"E"===e?"width":"height"]}},{key:"elementToElement",value:function(t,e,n,r){var i=this.elementToVertex(e,t,r),o=i.points[0];if(n.containsPoint(o)){var a=(i=this.elementToVertex(t,e,n)).points[0];if(r.containsPoint(a)){var s=at.movePoint(t,a,this.getBBoxSize(n,this.getBearing(t,a))/2),c=at.movePoint(e,o,this.getBBoxSize(r,this.getBearing(e,o))/2),u=at.midPoint(s,c),f=this.elementToVertex(t,u,n),l=this.vertexToVertex(u,e,f.direction);i.points=[f.points[0],l.points[0]],i.direction=l.direction}}return i}},{key:"elementToVertex",value:function(t,e,n){var r=this.freeJoin(e,t,n);return{points:[r],direction:this.getBearing(r,e)}}},{key:"vertexToElement",value:function(t,e,n,r){var i=this,o={},a=[{x:t.x,y:e.y},{x:e.x,y:t.y}].filter((function(t){return!n.containsPoint(t)})).filter((function(e){return i.getBearing(e,t)!==r})),s=null;return a.length>0?(s=a.filter((function(e){return i.getBearing(t,e)===r})).pop()||a[0],o.points=[s],o.direction=this.getBearing(s,e)):console.log("todo: ...."),o}},{key:"vertexToVertex",value:function(t,e,n){var r={x:t.x,y:e.y},i={x:e.x,y:t.y},o=this.getBearing(t,r),a=this.getBearing(t,i),s=this.opposites[n],c=o===n||o!==s&&(a===s||a!==n)?r:i;return{points:[c],direction:this.getBearing(c,e)}}}]),t}(),ct=function(){function t(e,n){i()(this,t),this.raphy=e,this.drawer=e.drawer,this.color=n||"#4b5f71"}return a()(t,[{key:"draw",value:function(t){var e={stroke:this.color,fill:"none","stroke-width":2,cursor:"pointer"};return this.drawer.polyline(t).attr(e)}},{key:"refresh",value:function(t,e){t.plot(e)}}]),t}(),ut=function(){function t(e,n){i()(this,t),this.raphy=e,this.drawer=e.drawer,this.color=n||"#4b5f71"}return a()(t,[{key:"draw",value:function(t){var e={stroke:this.color,"stroke-dasharray":"5, 5",fill:"none","stroke-width":2,cursor:"pointer"},n=this.getPath(t),r=this.drawer.path(n).attr(e);return r.marker("end",100,30,(function(t){t.text("http:80 => 80").font({size:"7"})})),r}},{key:"getPath",value:function(t){var e=t[0],n=t[1];return"M".concat(e.x," ").concat(e.y,"Q").concat(n.x,",").concat(e.y," ").concat(n.x,",").concat(n.y)}},{key:"refresh",value:function(t,e){var n=this.getPath(e);t.plot(n)}}]),t}(),ft=function(){function t(e,n,r,o){i()(this,t),this.id="".concat(e.id,"@@").concat(n.id),this.source=e,this.target=n,this.type=o||r.options.lineType||"primary",this.raphy=r,this.vertices=[],this.className="Raphy-line",this.router=new st,this.connection=this.connect(),this.addEventListener()}return a()(t,[{key:"addEventListener",value:function(){var t=this;this.line.on("click",(function(e){t.onFocus(),t.raphy.emit("line.click",t,e)}))}},{key:"onFocus",value:function(){this.raphy.store.setFocusLine(this.id),this.line.addClass("".concat(this.className,"--focus"))}},{key:"onBlur",value:function(){this.raphy.store.setFocusLine(null),this.line.removeClass("".concat(this.className,"--focus")),this.removeBtn&&this.removeBtn.remove()}},{key:"connect",value:function(){var t=null,e=this.getConnectionPoints();return t="primary"===this.type?new ct(this.raphy,this.source.options.color):"bezier"===this.type?new nt(this.raphy.drawer):new ut(this.raphy,this.source.options.color),this.line=t.draw(e),this.line.back(),t}},{key:"getKeyPos",value:function(){var t="right",e="right",n=2*this.source.svgElement.width(),r=this.source.svgElement.rbox(),i=r.x,o=r.y,a=this.target.svgElement.rbox(),s=a.x,c=a.y;return Math.abs(i-s)>=n?i>s?(t="left",e="right"):i<s&&(t="right",e="left"):o>c?(t="top",e="bottom"):o<c&&(t="bottom",e="top"),{start:t,end:e}}},{key:"getConnectionPoints",value:function(){var t=this.getKeyPos(),e=t.start,n=t.end,r=this.source.getKeyPointCoord(e,!0),i=this.target.getKeyPointCoord(n,!0),o=[];if("primary"===this.type){var a=this.router.router(this.source,this.target,this.vertices);o.push([r.x,r.y]),a.forEach((function(t){o.push([t.x,t.y])})),o.push([i.x,i.y])}else o.push(r),o.push(i);return o}},{key:"setVertices",value:function(t){this.vertices=t}},{key:"update",value:function(){var t=this.getConnectionPoints();this.connection.refresh(this.line,t)}},{key:"addRemoveBtn",value:function(){var t=this;this.removeBtn&&this.removeBtn.remove(),this.removeBtn=this.raphy.drawer.path("M13.4142136,12 L19.0710678,17.6568542 L17.6568542,19.0710678 L12,13.4142136 L6.34314575,19.0710678 L4.92893219,17.6568542 L10.5857864,12 L4.92893219,6.34314575 L6.34314575,4.92893219 L12,10.5857864 L17.6568542,4.92893219 L19.0710678,6.34314575 L13.4142136,12 Z").addClass("marker-tool"),this.removeBtn.size(10,10).style({cursor:"pointer"}),this.removeBtn.click((function(){return t.remove()}));var e=this.line.bbox(),n=e.x,r=e.y,i=e.x2,o=e.y2;this.removeBtn.x((n+i)/2).y((r+o)/2).addClass("marker-remove-line").dx(6).dy(-6)}},{key:"remove",value:function(){this.line.remove(),this.removeBtn&&this.removeBtn.remove(),this.source&&this.source.removeConnection(this.id),this.target&&this.target.removeConnection(this.id),this.raphy.store.removeConnection(this.id)}}]),t}(),lt=(n(216),function(t){function e(t,n){var r;return i()(this,e),(r=c()(this,f()(e).call(this))).options={width:800,height:600,gridSize:10,drawGrid:!0,background:!1,preventContextMenu:!0,elementClassName:"Raphy-element",lineClassName:"Raphy-line",connectionPointRadius:4},r.options=d()(n,r.options),r.store=new H,r.store.setOptions(r.options),r.canvas=new R(t,k()(r)),r.drawer=r.canvas.drawer,r.viewBox=r.drawer.viewbox(),r.dragManager=new rt(k()(r)),r}return h()(e,t),a()(e,[{key:"addElement",value:function(t){if(!t)throw new Error("No Element defined.");if(!t.id)throw new Error("No Element Id defined.");if(this.checkElementId(t.id))throw new Error("The element id [".concat(t.id,"] already exists"));t.draw(this),this.dragManager.register(t),this.store.addElement(t),this.emit("element.added",t)}},{key:"import",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!Array.isArray(e))throw new Error("wrong data format!");var n=this.options.elementFactory;e.forEach((function(e){if(e.id&&e.type){var r=n(e);t.addElement(r)}})),e.forEach((function(e){var n=e.parent,r=e.subParent;n&&t.addConnection(t.store.getElement(n),t.store.getElement(e.id)),Array.isArray(r)&&r.length&&r.forEach((function(n){t.addConnection(t.store.getElement(n),t.store.getElement(e.id))}))})),this.autoLayout()}},{key:"export",value:function(t){var e=this.store,n=e.elements,r=e.connections;return"function"==typeof this.options.exportData?this.options.exportData({elements:n,connections:r}):this.store.export(t)}},{key:"clear",value:function(){this.drawer.clear(),this.store.clear()}},{key:"exportImage",value:function(){return this.drawer.svg()}},{key:"downloadSVG",value:function(t){var e=this.drawer.svg(),n=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r;var o=t||"Raphy";i.download="".concat(o,".svg"),document.body.appendChild(i),i.click(),document.body.removeChild(i)}},{key:"zoom",value:function(t,e){return this.drawer.zoom(t,e)}},{key:"resetPanZoom",value:function(){var t=this.viewBox,e=t.width,n=t.height;this.drawer.viewbox({x:0,y:0,zoom:1,width:e,height:n})}},{key:"checkElementId",value:function(t){return this.store.elements.some((function(e){return t===e.id}))}},{key:"checkConnectible",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||!e)return!1;var r=this.options.checkConnectible;return!S()(r)||r(t,e,n)}},{key:"highlightConnectibleElement",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.store.elements.forEach((function(r){e.checkConnectible(t,r,n)&&(e.store.addTmpConnectibleElements(r),r.applyConnectibleStatus())}))}},{key:"unHighlightConnectibleElement",value:function(){this.store.tmpConnectibleElements.forEach((function(t){t.removeConnectibleStatus()})),this.store.clearTmpConnectibleElements()}},{key:"addConnection",value:function(t,e){var n=this.checkConnectible(t,e);if(n){var r=n.connectionType,i=n.lineType,o=t,a=e;if(o.id!==a.id){"c2p"===r&&(o=e,a=t);var s="".concat(o.id,"@@").concat(a.id);if(!this.store.connections[s]){var c=new ft(o,a,this,i);this.store.setConnection(s,c),t.addConnection(c.id),e.addConnection(c.id)}}}}},{key:"refreshConnection",value:function(t){var e=this;if(t)t.connections.forEach((function(t){e.store.connections[t].update()}));else{var n=this.store.connections;Object.keys(n).forEach((function(t){n[t].update()}))}}},{key:"addElementByDrop",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.dataTransfer.getData("type"),i=this.options.elementFactory;if(i){var o=i({type:r});if(n)this.addElement(o);else{var a=this.drawer.viewbox(),s=t.offsetX-55+a.x,c=t.offsetY-30+a.y;o.x=s,o.y=c,this.addElement(o)}e&&this.addConnection(o,e),n&&this.autoLayout()}}},{key:"autoLayout",value:function(){var t=this,e=this.store.export(!0),n=E()(e,{parentProperty:"parent"}),r=new M;n.forEach((function(t){t.parent="",r.createTree({nodeStructure:t}).positionTree()}));var i=r.store,o=i[i.length-1],a=100,s=100;if(o){var c=o.nodeDB.db,u=c[c.length-1],f=document.getElementById(this.canvas.wrapperId),l=f.getBoundingClientRect();s=(f.clientHeight-u.Y)/2-u.height-l.y,a=(f.clientWidth-u.X)/2-u.width-l.x}i.forEach((function(e){var n={};e.nodeDB.db.forEach((function(e){var r=e.realId;if(r){t.store.getElement(r).group.x(e.X+a).y(e.Y+s);var i="".concat(e.realParentId,"@@").concat(r),o=t.store.connections[i];o&&o.setVertices([]),e.stackParentId===n.id&&o.setVertices([{x:n.X+a,y:n.Y+s}])}else n=e})),t.refreshConnection()}))}},{key:"setIsDragging",value:function(t){t?this.drawer.addClass("Raphy--dragging"):this.drawer.removeClass("Raphy--dragging")}}]),e}(j.EventEmitter2))}])}));